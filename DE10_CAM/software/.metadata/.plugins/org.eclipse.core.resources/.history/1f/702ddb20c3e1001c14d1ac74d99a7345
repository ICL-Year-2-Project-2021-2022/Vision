/* A simple program that recognizes the characters 't' and 'v' */
#include <stdio.h>
#include <string.h>
int main ()
{
	char* msg = "Hello message from the FPGA.";
	char* response = "";
	FILE* fp;
	char prompt = 0;
	fp = fopen ("/dev/uart_0", "r+");
	if (fp) {
		printf("UART detected.");
		while (1) { // Loop until we receive a 'v'.
			printf("FPGA sending\n");
			fwrite (msg, strlen (msg), 1, fp);
			prompt = getc(fp);
			while(prompt != '\n') {
				response += prompt;
				prompt = getc(fp);
			}
 	 	 	if (prompt == 't') { // Print a message if character is 't'.
	 	 fwrite (msg, strlen (msg), 1, fp);
 	 }*/
		 usleep(100000);
 	 }
 	 //fprintf(fp, "Closing the UART file.\n");
 	 fclose (fp);
	} else {
		printf("UART not detected.");
	}
 	return 0;
}
